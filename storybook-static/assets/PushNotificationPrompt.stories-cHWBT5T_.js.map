{"version":3,"file":"PushNotificationPrompt.stories-cHWBT5T_.js","sources":["../../packages/platform-ui/src/blocks/PushNotificationPrompt.tsx","../../packages/platform-ui/src/stories/Blocks/PushNotificationPrompt.stories.tsx"],"sourcesContent":["/**\n * PushNotificationPrompt\n *\n * Modal dialog displayed to request browser push notification permission\n * from the user for receiving resourceRequest updates and reminders.\n */\nimport * as React from 'react';\nimport { Dialog, Button, Heading, Paragraph } from '@digdir/designsystemet-react';\nimport { cn } from '../utils';\nimport { BellIcon, CloseIcon } from '../primitives/icons';\n\n// =============================================================================\n// Types\n// =============================================================================\n\nexport interface PushNotificationPromptProps {\n  /** Whether the modal is open */\n  isOpen: boolean;\n  /** Close handler */\n  onClose: () => void;\n  /** Enable notifications handler */\n  onEnable?: () => void;\n  /** Dismiss handler (optional, defaults to onClose) */\n  onDismiss?: () => void;\n  /** Title text */\n  title?: string;\n  /** Description text */\n  description?: string;\n  /** Context for the prompt (affects messaging) */\n  context?: 'resourceRequest' | 'reminder' | 'general';\n  /** Custom class name */\n  className?: string;\n}\n\n// =============================================================================\n// Component\n// =============================================================================\n\nexport function PushNotificationPrompt({\n  isOpen,\n  onClose,\n  onEnable,\n  onDismiss,\n  title,\n  description,\n  context = 'general',\n  className,\n}: PushNotificationPromptProps): React.ReactElement {\n  // Get contextual messages\n  const getContextualContent = () => {\n    switch (context) {\n      case 'resourceRequest':\n        return {\n          title: title || 'Få varsler om dine resourceRequester',\n          description:\n            description ||\n            'Hold deg oppdatert om resourceRequestbekreftelser, endringer og kanselleringer direkte i nettleseren din.',\n        };\n      case 'reminder':\n        return {\n          title: title || 'Ikke gå glipp av dine resourceRequester',\n          description:\n            description ||\n            'Vi kan sende deg påminnelser før dine resourceRequester så du aldri glemmer en avtale.',\n        };\n      default:\n        return {\n          title: title || 'Aktiver varsler',\n          description:\n            description ||\n            'Få viktige oppdateringer om dine resourceRequester direkte i nettleseren din.',\n        };\n    }\n  };\n\n  const content = getContextualContent();\n\n  return (\n    <Dialog\n      open={isOpen}\n      onClose={onClose}\n      className={cn('push-notification-prompt', className)}\n      style={{ maxWidth: '400px' }}\n    >\n      <Dialog.Block>\n        {/* Close button */}\n        <div\n          style={{\n            display: 'flex',\n            justifyContent: 'flex-end',\n            marginBottom: 'var(--ds-spacing-2)',\n          }}\n        >\n          <Button\n            type=\"button\"\n            onClick={onClose}\n            aria-label=\"Lukk\"\n            data-color=\"neutral\"\n            style={{\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              width: 'var(--ds-spacing-8)',\n              height: 'var(--ds-spacing-8)',\n              border: 'none',\n              borderRadius: 'var(--ds-border-radius-full)',\n              backgroundColor: 'transparent',\n              color: 'var(--ds-color-neutral-text-subtle)',\n              cursor: 'pointer',\n            }}\n          >\n            <CloseIcon size={20} />\n          </Button>\n        </div>\n\n        {/* Icon */}\n        <div\n          style={{\n            display: 'flex',\n            justifyContent: 'center',\n            marginBottom: 'var(--ds-spacing-4)',\n          }}\n        >\n          <div\n            style={{\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              width: 'var(--ds-spacing-16)',\n              height: 'var(--ds-spacing-16)',\n              backgroundColor: 'var(--ds-color-accent-surface-default)',\n              borderRadius: 'var(--ds-border-radius-full)',\n              color: 'var(--ds-color-accent-base-default)',\n            }}\n          >\n            <BellIcon size={32} />\n          </div>\n        </div>\n\n        {/* Title */}\n        <Heading\n          level={2}\n          data-size=\"sm\"\n          style={{\n            margin: 0,\n            marginBottom: 'var(--ds-spacing-2)',\n            textAlign: 'center',\n          }}\n        >\n          {content.title}\n        </Heading>\n\n        {/* Description */}\n        <Paragraph\n          data-size=\"sm\"\n          style={{\n            margin: 0,\n            marginBottom: 'var(--ds-spacing-6)',\n            textAlign: 'center',\n            color: 'var(--ds-color-neutral-text-subtle)',\n          }}\n        >\n          {content.description}\n        </Paragraph>\n\n        {/* Actions */}\n        <div\n          style={{\n            display: 'flex',\n            flexDirection: 'column',\n            gap: 'var(--ds-spacing-2)',\n          }}\n        >\n          {onEnable && (\n            <Button type=\"button\" onClick={onEnable} data-size=\"md\" style={{ width: '100%' }}>\n              Aktiver varsler\n            </Button>\n          )}\n          <Button\n            type=\"button\"\n            onClick={onDismiss || onClose}\n            variant=\"secondary\"\n            data-size=\"md\"\n            style={{ width: '100%' }}\n          >\n            Kanskje senere\n          </Button>\n        </div>\n      </Dialog.Block>\n    </Dialog>\n  );\n}\n","import type { Meta, StoryObj } from '@storybook/react';\nimport { fn } from '@storybook/test';\nimport React, { useState } from 'react';\nimport { useT } from '@xala-technologies/i18n';\nimport { PushNotificationPrompt } from '../../blocks/PushNotificationPrompt';\n\nconst meta: Meta<typeof PushNotificationPrompt> = {\n  title: 'Blocks/PushNotificationPrompt',\n  component: PushNotificationPrompt,\n  parameters: {\n    layout: 'centered',\n    docs: {\n      description: {\n        component: `\n## PushNotificationPrompt\n\nModal dialog displayed to request browser push notification permission from the user for receiving booking updates and reminders.\n\n### Features\n- Contextual messages for different contexts\n- Enable and dismiss actions\n- Customizable title and description\n- Context types (resourceRequest, reminder, general)\n\n### Usage\n\\`\\`\\`tsx\n<PushNotificationPrompt\n  isOpen={true}\n  onClose={handleClose}\n  onEnable={handleEnable}\n  context=\"resourceRequest\"\n/>\n\\`\\`\\`\n        `,\n      },\n    },\n  },\n  args: {\n    onClose: fn(),\n    onEnable: fn(),\n    onDismiss: fn(),\n  },\n  tags: ['autodocs'],\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\n// Basic prompt\nexport const Default: Story = {\n  args: {\n    isOpen: true,\n    context: 'general',\n  },\n  render: (args) => {\n    const [isOpen, setIsOpen] = useState(true);\n    return (\n      <div style={{ width: '500px', height: '400px', position: 'relative' }}>\n        <PushNotificationPrompt {...args} isOpen={isOpen} onClose={() => setIsOpen(false)} />\n      </div>\n    );\n  },\n};\n\n// Booking context\nexport const BookingContext: Story = {\n  args: {\n    isOpen: true,\n    context: 'resourceRequest',\n  },\n  render: (args) => {\n    const [isOpen, setIsOpen] = useState(true);\n    return (\n      <div style={{ width: '500px', height: '400px', position: 'relative' }}>\n        <PushNotificationPrompt {...args} isOpen={isOpen} onClose={() => setIsOpen(false)} />\n      </div>\n    );\n  },\n};\n\n// Reminder context\nexport const ReminderContext: Story = {\n  args: {\n    isOpen: true,\n    context: 'reminder',\n  },\n  render: (args) => {\n    const [isOpen, setIsOpen] = useState(true);\n    return (\n      <div style={{ width: '500px', height: '400px', position: 'relative' }}>\n        <PushNotificationPrompt {...args} isOpen={isOpen} onClose={() => setIsOpen(false)} />\n      </div>\n    );\n  },\n};\n\n// Custom title and description\nexport const CustomContent: Story = {\n  render: function Render() {\n    const t = useT();\n    const [isOpen, setIsOpen] = useState(true);\n    return (\n      <div style={{ width: '500px', height: '400px', position: 'relative' }}>\n        <PushNotificationPrompt\n          isOpen={isOpen}\n          onClose={() => setIsOpen(false)}\n          onEnable={fn()}\n          onDismiss={fn()}\n          title={t('platform.common.notifications')}\n          description={t('storybook.demo.cardDescription')}\n        />\n      </div>\n    );\n  },\n};\n\n// Closed state\nexport const Closed: Story = {\n  render: function Render() {\n    const t = useT();\n    return (\n      <div style={{ width: '500px', height: '400px', position: 'relative' }}>\n        <PushNotificationPrompt\n          isOpen={false}\n          context=\"general\"\n          onClose={fn()}\n          onEnable={fn()}\n          onDismiss={fn()}\n        />\n        <div style={{ padding: 'var(--ds-spacing-4)' }}>\n          <p>{t('storybook.demo.sampleText')}</p>\n        </div>\n      </div>\n    );\n  },\n};\n"],"names":["cov_e5e0lv4nn","actualCoverage","isOpen","PushNotificationPrompt","onClose","onEnable","onDismiss","title","description","context","className","s","getContextualContent","b","jsx","Dialog","style","cn","maxWidth","children","display","justifyContent","marginBottom","type","Button","onClick","alignItems","width","height","border","borderRadius","backgroundColor","color","cursor","size","CloseIcon","BellIcon","level","Heading","margin","textAlign","Paragraph","jsxs","flexDirection","gap","variant","meta","component","parameters","layout","docs","args","fn","tags","Default","render","setIsOpen","useState","position","BookingContext","ReminderContext","CustomContent","t","useT","Closed","padding","source","originalSource"],"mappings":"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"}