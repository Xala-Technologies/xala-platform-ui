{"version":3,"file":"InfiniteScroll.stories-Cz_RwbtP.js","sources":["../../packages/platform-ui/src/composed/InfiniteScroll.tsx","../../packages/platform-ui/src/stories/Composed/InfiniteScroll.stories.tsx"],"sourcesContent":["/**\n * InfiniteScroll & VirtualList Components\n *\n * Efficient rendering for large lists with scroll loading.\n * SSR-safe with 'use client' directive.\n *\n * @module @xala-technologies/platform/ui/composed/InfiniteScroll\n */\n\n'use client';\n\nimport React, { useState, useCallback, useRef, useEffect, type ReactNode } from 'react';\nimport { Button } from '@digdir/designsystemet-react';\n\n// =============================================================================\n// Types\n// =============================================================================\n\nexport interface InfiniteScrollProps {\n  children: ReactNode;\n  loadMore: () => Promise<void> | void;\n  hasMore: boolean;\n  isLoading?: boolean;\n  threshold?: number;\n  loader?: ReactNode;\n  endMessage?: ReactNode;\n  errorMessage?: ReactNode;\n  error?: boolean;\n  onRetry?: () => void;\n  className?: string;\n  style?: React.CSSProperties;\n}\n\nexport interface VirtualListProps<T> {\n  items: T[];\n  itemHeight: number;\n  renderItem: (item: T, index: number) => ReactNode;\n  overscan?: number;\n  className?: string;\n  style?: React.CSSProperties;\n}\n\n// =============================================================================\n// Icons\n// =============================================================================\n\nfunction SpinnerIcon() {\n  return (\n    <svg\n      width=\"24\"\n      height=\"24\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      style={{ animation: 'spin 1s linear infinite' }}\n    >\n      <path d=\"M21 12a9 9 0 1 1-6.219-8.56\" />\n    </svg>\n  );\n}\n\n// =============================================================================\n// InfiniteScroll Component\n// =============================================================================\n\nexport function InfiniteScroll({\n  children,\n  loadMore,\n  hasMore,\n  isLoading = false,\n  threshold = 100,\n  loader,\n  endMessage,\n  errorMessage,\n  error = false,\n  onRetry,\n  className,\n  style,\n}: InfiniteScrollProps): React.ReactElement {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const sentinelRef = useRef<HTMLDivElement>(null);\n  const [isLoadingMore, setIsLoadingMore] = useState(false);\n\n  const handleLoadMore = useCallback(async () => {\n    if (isLoading || isLoadingMore || !hasMore || error) return;\n    setIsLoadingMore(true);\n    try {\n      await loadMore();\n    } finally {\n      setIsLoadingMore(false);\n    }\n  }, [isLoading, isLoadingMore, hasMore, error, loadMore]);\n\n  useEffect(() => {\n    const sentinel = sentinelRef.current;\n    if (!sentinel) return;\n\n    const observer = new IntersectionObserver(\n      (entries) => {\n        const entry = entries[0];\n        if (entry && entry.isIntersecting && hasMore && !isLoading && !isLoadingMore && !error) {\n          handleLoadMore();\n        }\n      },\n      { rootMargin: `${threshold}px` }\n    );\n\n    observer.observe(sentinel);\n    return () => observer.disconnect();\n  }, [hasMore, isLoading, isLoadingMore, error, threshold, handleLoadMore]);\n\n  const defaultLoader = (\n    <div\n      style={{\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        padding: 'var(--ds-spacing-6)',\n        color: 'var(--ds-color-accent-text-default)',\n      }}\n    >\n      <SpinnerIcon />\n    </div>\n  );\n\n  const defaultEndMessage = (\n    <div\n      style={{\n        padding: 'var(--ds-spacing-6)',\n        textAlign: 'center',\n        fontSize: 'var(--ds-font-size-sm)',\n        color: 'var(--ds-color-neutral-text-subtle)',\n      }}\n    >\n      No more items to load\n    </div>\n  );\n\n  const defaultErrorMessage = (\n    <div\n      style={{\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        gap: 'var(--ds-spacing-3)',\n        padding: 'var(--ds-spacing-6)',\n        textAlign: 'center',\n      }}\n    >\n      <span\n        style={{ fontSize: 'var(--ds-font-size-sm)', color: 'var(--ds-color-danger-text-default)' }}\n      >\n        Failed to load more items\n      </span>\n      {onRetry && (\n        <Button\n          type=\"button\"\n          onClick={onRetry}\n          data-color=\"accent\"\n          style={{\n            padding: 'var(--ds-spacing-2) var(--ds-spacing-4)',\n            fontSize: 'var(--ds-font-size-sm)',\n            fontWeight: 'var(--ds-font-weight-medium)',\n            color: 'var(--ds-color-accent-text-default)',\n            backgroundColor: 'var(--ds-color-accent-surface-subtle)',\n            borderWidth: 'var(--ds-border-width-default)',\n            borderStyle: 'solid',\n            borderColor: 'var(--ds-color-accent-border-default)',\n            borderRadius: 'var(--ds-border-radius-md)',\n            cursor: 'pointer',\n          }}\n        >\n          Try again\n        </Button>\n      )}\n    </div>\n  );\n\n  return (\n    <div ref={containerRef} className={className} style={style}>\n      {children}\n      <div ref={sentinelRef} style={{ height: 'var(--ds-border-width-default)' }} />\n      {(isLoading || isLoadingMore) && (loader || defaultLoader)}\n      {error && (errorMessage || defaultErrorMessage)}\n      {!hasMore && !isLoading && !error && (endMessage || defaultEndMessage)}\n      <style>{`@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }`}</style>\n    </div>\n  );\n}\n\n// =============================================================================\n// VirtualList Component\n// =============================================================================\n\nexport function VirtualList<T>({\n  items,\n  itemHeight,\n  renderItem,\n  overscan = 3,\n  className,\n  style,\n}: VirtualListProps<T>): React.ReactElement {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [scrollTop, setScrollTop] = useState(0);\n  const [containerHeight, setContainerHeight] = useState(0);\n\n  useEffect(() => {\n    const container = containerRef.current;\n    if (!container) return;\n\n    const handleScroll = () => setScrollTop(container.scrollTop);\n    const handleResize = () => setContainerHeight(container.clientHeight);\n\n    handleResize();\n    container.addEventListener('scroll', handleScroll, { passive: true });\n    window.addEventListener('resize', handleResize);\n\n    return () => {\n      container.removeEventListener('scroll', handleScroll);\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n\n  const totalHeight = items.length * itemHeight;\n  const startIndex = Math.max(0, Math.floor(scrollTop / itemHeight) - overscan);\n  const endIndex = Math.min(\n    items.length - 1,\n    Math.ceil((scrollTop + containerHeight) / itemHeight) + overscan\n  );\n\n  const visibleItems: Array<{ item: T; index: number }> = [];\n  for (let i = startIndex; i <= endIndex; i++) {\n    const item = items[i];\n    if (item !== undefined) {\n      visibleItems.push({ item, index: i });\n    }\n  }\n\n  return (\n    <div\n      ref={containerRef}\n      className={className}\n      style={{\n        height: '100%',\n        overflow: 'auto',\n        ...style,\n      }}\n    >\n      <div style={{ position: 'relative', height: totalHeight }}>\n        {visibleItems.map(({ item, index }) => (\n          <div\n            key={index}\n            style={{\n              position: 'absolute',\n              top: index * itemHeight,\n              left: 0,\n              right: 0,\n              height: itemHeight,\n            }}\n          >\n            {renderItem(item, index)}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\n// =============================================================================\n// useInfiniteScroll Hook\n// =============================================================================\n\nexport function useInfiniteScroll(\n  loadMore: () => Promise<void>,\n  hasMore: boolean\n): { sentinelRef: React.RefObject<HTMLDivElement>; isLoading: boolean } {\n  const sentinelRef = useRef<HTMLDivElement>(null);\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    const sentinel = sentinelRef.current;\n    if (!sentinel) return;\n\n    const observer = new IntersectionObserver(\n      async (entries) => {\n        const entry = entries[0];\n        if (entry && entry.isIntersecting && hasMore && !isLoading) {\n          setIsLoading(true);\n          try {\n            await loadMore();\n          } finally {\n            setIsLoading(false);\n          }\n        }\n      },\n      { rootMargin: '100px' }\n    );\n\n    observer.observe(sentinel);\n    return () => observer.disconnect();\n  }, [hasMore, isLoading, loadMore]);\n\n  return { sentinelRef, isLoading };\n}\n\nexport default { InfiniteScroll, VirtualList, useInfiniteScroll };\n","import type { Meta, StoryObj } from '@storybook/react';\nimport { fn } from '@storybook/test';\nimport { useState } from 'react';\nimport { useT } from '@xala-technologies/i18n';\nimport { InfiniteScroll, VirtualList } from '../../composed/InfiniteScroll';\nimport { Card, Paragraph } from '@digdir/designsystemet-react';\n\nconst meta: Meta<typeof InfiniteScroll> = {\n  title: 'Composed/InfiniteScroll',\n  component: InfiniteScroll,\n  parameters: {\n    layout: 'centered',\n    docs: {\n      description: {\n        component: `\n## InfiniteScroll & VirtualList\n\nEfficient rendering for large lists with scroll loading and virtualization.\n\n### Features\n- Infinite scroll with intersection observer\n- Custom loader and end messages\n- Error handling with retry\n- VirtualList for performance with large datasets\n- useInfiniteScroll hook\n\n### Usage\n\\`\\`\\`tsx\n<InfiniteScroll\n  loadMore={handleLoadMore}\n  hasMore={hasMore}\n  isLoading={isLoading}\n>\n  {items.map(item => <Item key={item.id} {...item} />)}\n</InfiniteScroll>\n\\`\\`\\`\n        `,\n      },\n    },\n  },\n  argTypes: {\n    threshold: {\n      control: 'number',\n      description: 'Distance from bottom to trigger load (px)',\n    },\n  },\n  tags: ['autodocs'],\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\n// Wrapper components for stories that need translations\nconst DefaultDemo = () => {\n  const t = useT();\n  const [items, setItems] = useState(Array.from({ length: 10 }, (_, i) => i + 1));\n  const [hasMore, setHasMore] = useState(true);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const loadMore = async () => {\n    setIsLoading(true);\n    await new Promise((resolve) => setTimeout(resolve, 1000));\n    const newItems = Array.from({ length: 10 }, (_, i) => items.length + i + 1);\n    setItems([...items, ...newItems]);\n    setHasMore(newItems.length === 10 && items.length < 50);\n    setIsLoading(false);\n  };\n\n  return (\n    <div\n      style={{\n        width: '400px',\n        height: '400px',\n        overflow: 'auto',\n        border: '1px solid var(--ds-color-neutral-border-subtle)',\n      }}\n    >\n      <InfiniteScroll loadMore={loadMore} hasMore={hasMore} isLoading={isLoading}>\n        {items.map((item) => (\n          <Card\n            key={item}\n            data-color=\"neutral\"\n            data-size=\"medium\"\n            style={{ marginBottom: 'var(--ds-spacing-2)' }}\n          >\n            <Paragraph data-size=\"sm\">\n              {t('storybook.demo.item')} {item}\n            </Paragraph>\n          </Card>\n        ))}\n      </InfiniteScroll>\n    </div>\n  );\n};\n\nconst CustomLoaderDemo = () => {\n  const t = useT();\n  const [items, setItems] = useState(Array.from({ length: 5 }, (_, i) => i + 1));\n  const [hasMore, setHasMore] = useState(true);\n\n  const loadMore = async () => {\n    await new Promise((resolve) => setTimeout(resolve, 1000));\n    const newItems = Array.from({ length: 5 }, (_, i) => items.length + i + 1);\n    setItems([...items, ...newItems]);\n    setHasMore(items.length < 20);\n  };\n\n  return (\n    <div\n      style={{\n        width: '400px',\n        height: '400px',\n        overflow: 'auto',\n        border: '1px solid var(--ds-color-neutral-border-subtle)',\n      }}\n    >\n      <InfiniteScroll\n        loadMore={loadMore}\n        hasMore={hasMore}\n        loader={\n          <div\n            style={{\n              padding: 'var(--ds-spacing-4)',\n              textAlign: 'center',\n              color: 'var(--ds-color-neutral-text-subtle)',\n            }}\n          >\n            {t('storybook.demo.loadingMoreItems')}\n          </div>\n        }\n      >\n        {items.map((item) => (\n          <Card\n            key={item}\n            data-color=\"neutral\"\n            data-size=\"medium\"\n            style={{ marginBottom: 'var(--ds-spacing-2)' }}\n          >\n            <Paragraph data-size=\"sm\">\n              {t('storybook.demo.item')} {item}\n            </Paragraph>\n          </Card>\n        ))}\n      </InfiniteScroll>\n    </div>\n  );\n};\n\nconst WithEndMessageDemo = () => {\n  const t = useT();\n  const [items] = useState(Array.from({ length: 5 }, (_, i) => i + 1));\n\n  return (\n    <div\n      style={{\n        width: '400px',\n        height: '400px',\n        overflow: 'auto',\n        border: '1px solid var(--ds-color-neutral-border-subtle)',\n      }}\n    >\n      <InfiniteScroll\n        loadMore={fn()}\n        hasMore={false}\n        endMessage={\n          <div\n            style={{\n              padding: 'var(--ds-spacing-4)',\n              textAlign: 'center',\n              color: 'var(--ds-color-success-text-default)',\n            }}\n          >\n            {t('storybook.demo.allItemsLoaded')}\n          </div>\n        }\n      >\n        {items.map((item) => (\n          <Card\n            key={item}\n            data-color=\"neutral\"\n            data-size=\"medium\"\n            style={{ marginBottom: 'var(--ds-spacing-2)' }}\n          >\n            <Paragraph data-size=\"sm\">\n              {t('storybook.demo.item')} {item}\n            </Paragraph>\n          </Card>\n        ))}\n      </InfiniteScroll>\n    </div>\n  );\n};\n\nconst WithErrorDemo = () => {\n  const t = useT();\n  const [items] = useState(Array.from({ length: 5 }, (_, i) => i + 1));\n  const [error, setError] = useState(true);\n\n  return (\n    <div\n      style={{\n        width: '400px',\n        height: '400px',\n        overflow: 'auto',\n        border: '1px solid var(--ds-color-neutral-border-subtle)',\n      }}\n    >\n      <InfiniteScroll loadMore={fn()} hasMore={true} error={error} onRetry={() => setError(false)}>\n        {items.map((item) => (\n          <Card\n            key={item}\n            data-color=\"neutral\"\n            data-size=\"medium\"\n            style={{ marginBottom: 'var(--ds-spacing-2)' }}\n          >\n            <Paragraph data-size=\"sm\">\n              {t('storybook.demo.item')} {item}\n            </Paragraph>\n          </Card>\n        ))}\n      </InfiniteScroll>\n    </div>\n  );\n};\n\nconst VirtualListDemo = () => {\n  const t = useT();\n  const items = Array.from({ length: 1000 }, (_, i) => ({\n    id: i + 1,\n    name: `${t('storybook.demo.item')} ${i + 1}`,\n  }));\n\n  return (\n    <div\n      style={{\n        width: '400px',\n        height: '400px',\n        border: '1px solid var(--ds-color-neutral-border-subtle)',\n      }}\n    >\n      <VirtualList\n        items={items}\n        itemHeight={60}\n        renderItem={(item) => (\n          <Card\n            data-color=\"neutral\"\n            data-size=\"medium\"\n            style={{\n              margin: 'var(--ds-spacing-2)',\n              padding: 'var(--ds-spacing-3)',\n              height: '52px',\n            }}\n          >\n            <Paragraph data-size=\"sm\">{item.name}</Paragraph>\n          </Card>\n        )}\n      />\n    </div>\n  );\n};\n\n// Basic infinite scroll\nexport const Default: Story = {\n  render: () => <DefaultDemo />,\n};\n\n// With custom loader\nexport const CustomLoader: Story = {\n  render: () => <CustomLoaderDemo />,\n};\n\n// With end message\nexport const WithEndMessage: Story = {\n  render: () => <WithEndMessageDemo />,\n};\n\n// With error state\nexport const WithError: Story = {\n  render: () => <WithErrorDemo />,\n};\n\n// VirtualList\nexport const VirtualListExample: Story = {\n  render: () => <VirtualListDemo />,\n};\n"],"names":["cov_mg4lcltgh","actualCoverage","s","jsx","height","viewBox","fill","stroke","strokeWidth","style","animation","children","d","InfiniteScroll","loadMore","hasMore","isLoading","threshold","b","loader","endMessage","errorMessage","error","onRetry","className","containerRef","sentinelRef","useRef","setIsLoadingMore","handleLoadMore","useCallback","useState","isLoadingMore","useEffect","sentinel","f","entries","entry","rootMargin","observer","observe","disconnect","defaultLoader","display","alignItems","justifyContent","padding","color","SpinnerIcon","textAlign","fontSize","jsxs","flexDirection","gap","type","Button","onClick","fontWeight","backgroundColor","borderWidth","borderStyle","borderColor","borderRadius","cursor","ref","defaultErrorMessage","defaultEndMessage","VirtualList","itemHeight","renderItem","overscan","setScrollTop","containerHeight","setContainerHeight","container","handleScroll","handleResize","addEventListener","passive","window","removeEventListener","startIndex","Math","max","endIndex","min","items","length","scrollTop","visibleItems","item","i","push","index","overflow","position","totalHeight","top","left","right","meta","title","component","parameters","layout","docs","description","argTypes","control","tags","DefaultDemo","t","useT","setItems","Array","from","_","setHasMore","setIsLoading","Promise","resolve","setTimeout","newItems","width","border","map","Card","marginBottom","Paragraph","CustomLoaderDemo","WithEndMessageDemo","fn","WithErrorDemo","setError","VirtualListDemo","id","name","margin","Default","render","CustomLoader","WithEndMessage","WithError","VirtualListExample","source","originalSource"],"mappings":"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"}