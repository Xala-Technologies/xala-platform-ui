{"version":3,"file":"GlobalErrorHandler.stories--MpKgaqc.js","sources":["../../packages/platform-ui/src/blocks/GlobalErrorHandler.tsx","../../packages/platform-ui/src/stories/Blocks/GlobalErrorHandler.stories.tsx"],"sourcesContent":["/**\n * Global Error Handler Component\n *\n * Catches unhandled JavaScript errors and promise rejections at the window level.\n * Provides a user-friendly error screen for global errors that aren't caught by\n * React's ErrorBoundary (e.g., async errors, event handlers).\n *\n * @example\n * // Wrap your app with GlobalErrorHandler\n * <GlobalErrorHandler>\n *   <App />\n * </GlobalErrorHandler>\n */\nimport * as React from 'react';\nimport { useCallback, useEffect, useState } from 'react';\nimport { ErrorScreen } from './AuthComponents';\n\n// =============================================================================\n// Types\n// =============================================================================\n\nexport interface GlobalError {\n  /** Error message */\n  message: string;\n  /** Error source (filename, url) */\n  source?: string;\n  /** Line number where error occurred */\n  lineno?: number;\n  /** Column number where error occurred */\n  colno?: number;\n  /** Original error object */\n  error?: Error;\n  /** Type of error (window error, unhandled rejection, chunk load failure) */\n  type: 'window-error' | 'unhandled-rejection' | 'chunk-load-failure';\n}\n\nexport interface GlobalErrorHandlerProps {\n  /** Child components to wrap */\n  children: React.ReactNode;\n  /** Custom fallback UI to render when an error occurs */\n  fallback?: React.ReactNode;\n  /** Callback when an error is caught (for error tracking services) */\n  onError?: (error: GlobalError) => void;\n  /** Custom title for the error screen */\n  errorTitle?: string;\n  /** Custom description for the error screen */\n  errorDescription?: string;\n  /** Show the retry button (default: true) */\n  showRetryButton?: boolean;\n  /** Custom retry button text */\n  retryButtonText?: string;\n  /** Custom retry handler (defaults to page reload) */\n  onRetry?: () => void;\n}\n\n// =============================================================================\n// Helper Functions\n// =============================================================================\n\n/**\n * Check if an error is a chunk load failure (common in SPA code splitting)\n */\nfunction isChunkLoadError(error: Error | unknown): boolean {\n  if (error instanceof Error) {\n    const message = error.message.toLowerCase();\n    return (\n      message.includes('loading chunk') ||\n      message.includes('loading css chunk') ||\n      message.includes('failed to fetch dynamically imported module') ||\n      message.includes('unable to preload css')\n    );\n  }\n  return false;\n}\n\n/**\n * Get a user-friendly message for different error types\n */\nfunction getErrorDescription(error: GlobalError): string {\n  if (error.type === 'chunk-load-failure') {\n    return 'En ny versjon av applikasjonen er tilgjengelig. Vennligst last siden på nytt.';\n  }\n\n  if (error.type === 'unhandled-rejection') {\n    return 'En asynkron operasjon feilet. Vennligst prøv igjen.';\n  }\n\n  // Default message\n  return 'En uventet feil har oppstått. Vennligst prøv igjen senere.';\n}\n\n// =============================================================================\n// GlobalErrorHandler Component\n// =============================================================================\n\nexport function GlobalErrorHandler({\n  children,\n  fallback,\n  onError,\n  errorTitle = 'Noe gikk galt',\n  errorDescription,\n  showRetryButton = true,\n  retryButtonText = 'Last siden på nytt',\n  onRetry,\n}: GlobalErrorHandlerProps): React.ReactElement {\n  const [error, setError] = useState<GlobalError | null>(null);\n\n  /**\n   * Handle window.onerror events\n   */\n  const handleWindowError = useCallback(\n    (event: ErrorEvent): void => {\n      // Prevent default browser error handling\n      event.preventDefault();\n\n      const globalError: GlobalError = {\n        message: event.message || 'Unknown error',\n        source: event.filename,\n        lineno: event.lineno,\n        colno: event.colno,\n        error: event.error instanceof Error ? event.error : undefined,\n        type: isChunkLoadError(event.error) ? 'chunk-load-failure' : 'window-error',\n      };\n\n      console.error('GlobalErrorHandler caught a window error:', globalError);\n\n      setError(globalError);\n\n      // Call the onError callback if provided\n      // TODO: Integrate with error tracking service (e.g., Sentry)\n      if (onError) {\n        onError(globalError);\n      }\n    },\n    [onError]\n  );\n\n  /**\n   * Handle unhandled promise rejection events\n   */\n  const handleUnhandledRejection = useCallback(\n    (event: PromiseRejectionEvent): void => {\n      // Prevent default browser error handling\n      event.preventDefault();\n\n      const reason = event.reason;\n      const errorMessage =\n        reason instanceof Error\n          ? reason.message\n          : typeof reason === 'string'\n            ? reason\n            : 'Ubehandlet avvisning av løfte';\n\n      const globalError: GlobalError = {\n        message: errorMessage,\n        error: reason instanceof Error ? reason : undefined,\n        type: isChunkLoadError(reason) ? 'chunk-load-failure' : 'unhandled-rejection',\n      };\n\n      console.error('GlobalErrorHandler caught an unhandled rejection:', globalError);\n\n      setError(globalError);\n\n      // Call the onError callback if provided\n      // TODO: Integrate with error tracking service (e.g., Sentry)\n      if (onError) {\n        onError(globalError);\n      }\n    },\n    [onError]\n  );\n\n  /**\n   * Handle retry action\n   */\n  const handleRetry = useCallback((): void => {\n    // Reset error state\n    setError(null);\n\n    // Use custom retry handler if provided, otherwise reload the page\n    if (onRetry) {\n      onRetry();\n    } else {\n      window.location.reload();\n    }\n  }, [onRetry]);\n\n  /**\n   * Set up global error listeners\n   */\n  useEffect(() => {\n    // Add event listeners\n    window.addEventListener('error', handleWindowError);\n    window.addEventListener('unhandledrejection', handleUnhandledRejection);\n\n    // Cleanup on unmount\n    return () => {\n      window.removeEventListener('error', handleWindowError);\n      window.removeEventListener('unhandledrejection', handleUnhandledRejection);\n    };\n  }, [handleWindowError, handleUnhandledRejection]);\n\n  // If an error occurred, show the error UI\n  if (error) {\n    // Use custom fallback if provided\n    if (fallback) {\n      return <>{fallback}</>;\n    }\n\n    // Use ErrorScreen with Norwegian text\n    return (\n      <ErrorScreen\n        title={errorTitle}\n        description={errorDescription || getErrorDescription(error)}\n        showRetryButton={showRetryButton}\n        retryButtonText={retryButtonText}\n        onRetry={handleRetry}\n      />\n    );\n  }\n\n  // No error - render children\n  return <>{children}</>;\n}\n\n// =============================================================================\n// useGlobalError Hook\n// =============================================================================\n\nexport interface UseGlobalErrorOptions {\n  /** Callback when an error is caught */\n  onError?: (error: GlobalError) => void;\n}\n\n/**\n * Hook to listen for global errors without rendering a fallback UI.\n * Useful for logging/tracking errors while letting them bubble up.\n *\n * @example\n * function App() {\n *   useGlobalError({\n *     onError: (error) => trackError(error),\n *   });\n *   return <MyApp />;\n * }\n */\nexport function useGlobalError(options: UseGlobalErrorOptions = {}): GlobalError | null {\n  const [error, setError] = useState<GlobalError | null>(null);\n  const { onError } = options;\n\n  useEffect(() => {\n    const handleError = (event: ErrorEvent): void => {\n      const globalError: GlobalError = {\n        message: event.message || 'Unknown error',\n        source: event.filename,\n        lineno: event.lineno,\n        colno: event.colno,\n        error: event.error instanceof Error ? event.error : undefined,\n        type: isChunkLoadError(event.error) ? 'chunk-load-failure' : 'window-error',\n      };\n\n      setError(globalError);\n\n      if (onError) {\n        onError(globalError);\n      }\n    };\n\n    const handleRejection = (event: PromiseRejectionEvent): void => {\n      const reason = event.reason;\n      const errorMessage =\n        reason instanceof Error\n          ? reason.message\n          : typeof reason === 'string'\n            ? reason\n            : 'Ubehandlet avvisning av løfte';\n\n      const globalError: GlobalError = {\n        message: errorMessage,\n        error: reason instanceof Error ? reason : undefined,\n        type: isChunkLoadError(reason) ? 'chunk-load-failure' : 'unhandled-rejection',\n      };\n\n      setError(globalError);\n\n      if (onError) {\n        onError(globalError);\n      }\n    };\n\n    window.addEventListener('error', handleError);\n    window.addEventListener('unhandledrejection', handleRejection);\n\n    return () => {\n      window.removeEventListener('error', handleError);\n      window.removeEventListener('unhandledrejection', handleRejection);\n    };\n  }, [onError]);\n\n  return error;\n}\n","import type { Meta, StoryObj } from '@storybook/react';\nimport { fn } from '@storybook/test';\nimport React from 'react';\nimport { useT } from '@xala-technologies/i18n';\nimport { GlobalErrorHandler } from '../../blocks/GlobalErrorHandler';\n\nconst meta: Meta<typeof GlobalErrorHandler> = {\n  title: 'Blocks/GlobalErrorHandler',\n  component: GlobalErrorHandler,\n  parameters: {\n    layout: 'centered',\n    docs: {\n      description: {\n        component: `\n## GlobalErrorHandler\n\nCatches unhandled JavaScript errors and promise rejections at the window level. Provides a user-friendly error screen for global errors that aren't caught by React's ErrorBoundary.\n\n### Features\n- Catches window errors\n- Handles unhandled promise rejections\n- Detects chunk load failures\n- Custom error messages\n- Retry functionality\n\n### Usage\n\\`\\`\\`tsx\n<GlobalErrorHandler\n  onError={(error) => {\n    // Log to error tracking service\n  }}\n  errorTitle=\"Something went wrong\"\n>\n  <App />\n</GlobalErrorHandler>\n\\`\\`\\`\n        `,\n      },\n    },\n  },\n  args: {\n    onError: fn(),\n    onRetry: fn(),\n  },\n  tags: ['autodocs'],\n};\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\n// Working app (no error)\nexport const NoError: Story = {\n  args: {},\n  render: function Render(args) {\n    const t = useT();\n    return (\n      <div style={{ width: '500px' }}>\n        <GlobalErrorHandler {...args}>\n          <div style={{ padding: 'var(--ds-spacing-4)' }}>\n            <h3>{t('storybook.demo.cardTitle')}</h3>\n            <p>{t('storybook.demo.cardDescription')}</p>\n          </div>\n        </GlobalErrorHandler>\n      </div>\n    );\n  },\n};\n\n// Custom error title\nexport const CustomTitle: Story = {\n  args: {\n    errorTitle: 'Application Error',\n    showRetryButton: true,\n  },\n  render: function Render(args) {\n    const t = useT();\n    // Simulate error by throwing\n    React.useEffect(() => {\n      // This would normally be caught by GlobalErrorHandler\n      // For demo purposes, we'll show the error screen directly\n    }, []);\n    return (\n      <div style={{ width: '500px' }}>\n        <GlobalErrorHandler {...args}>\n          <div style={{ padding: 'var(--ds-spacing-4)' }}>\n            <p>{t('storybook.demo.sampleText')}</p>\n          </div>\n        </GlobalErrorHandler>\n      </div>\n    );\n  },\n};\n\n// Custom error description\nexport const CustomDescription: Story = {\n  args: {\n    errorDescription: 'A critical error occurred. Please refresh the page or contact support.',\n    showRetryButton: true,\n  },\n  render: function Render(args) {\n    const t = useT();\n    return (\n      <div style={{ width: '500px' }}>\n        <GlobalErrorHandler {...args}>\n          <div style={{ padding: 'var(--ds-spacing-4)' }}>\n            <p>{t('storybook.demo.sampleText')}</p>\n          </div>\n        </GlobalErrorHandler>\n      </div>\n    );\n  },\n};\n\n// Without retry button\nexport const WithoutRetryButton: Story = {\n  args: {\n    showRetryButton: false,\n  },\n  render: function Render(args) {\n    const t = useT();\n    return (\n      <div style={{ width: '500px' }}>\n        <GlobalErrorHandler {...args}>\n          <div style={{ padding: 'var(--ds-spacing-4)' }}>\n            <p>{t('storybook.demo.sampleText')}</p>\n          </div>\n        </GlobalErrorHandler>\n      </div>\n    );\n  },\n};\n\n// Custom retry button text\nexport const CustomRetryText: Story = {\n  args: {\n    retryButtonText: 'Reload Page',\n    showRetryButton: true,\n  },\n  render: function Render(args) {\n    const t = useT();\n    return (\n      <div style={{ width: '500px' }}>\n        <GlobalErrorHandler {...args}>\n          <div style={{ padding: 'var(--ds-spacing-4)' }}>\n            <p>{t('storybook.demo.sampleText')}</p>\n          </div>\n        </GlobalErrorHandler>\n      </div>\n    );\n  },\n};\n\n// Custom fallback\nexport const CustomFallback: Story = {\n  args: {\n    fallback: (\n      <div\n        style={{\n          padding: 'var(--ds-spacing-8)',\n          textAlign: 'center',\n          border: '2px dashed var(--ds-color-danger-border-default)',\n          borderRadius: 'var(--ds-border-radius-md)',\n        }}\n      >\n        <h2>Custom Error UI</h2>\n        <p>This is a custom fallback component for global errors.</p>\n      </div>\n    ),\n  },\n  render: function Render(args) {\n    const t = useT();\n    return (\n      <div style={{ width: '500px' }}>\n        <GlobalErrorHandler {...args}>\n          <div style={{ padding: 'var(--ds-spacing-4)' }}>\n            <p>{t('storybook.demo.sampleText')}</p>\n          </div>\n        </GlobalErrorHandler>\n      </div>\n    );\n  },\n};\n"],"names":["cov_2jsuvujmfe","actualCoverage","Fragment","error","s","message","b","children","GlobalErrorHandler","fallback","onError","errorTitle","errorDescription","showRetryButton","retryButtonText","onRetry","setError","handleWindowError","useState","useCallback","event","preventDefault","globalError","source","lineno","colno","type","isChunkLoadError","console","handleUnhandledRejection","reason","errorMessage","handleRetry","window","location","reload","useEffect","addEventListener","removeEventListener","jsx","ErrorScreen","description","getErrorDescription","useGlobalError","options","handleError","handleRejection","meta","title","component","parameters","layout","docs","args","fn","tags","NoError","render","t","useT","width","jsxs","padding","CustomTitle","React","CustomDescription","WithoutRetryButton","CustomRetryText","CustomFallback","textAlign","border","borderRadius","originalSource"],"mappings":"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"}