{"version":3,"file":"Dialog.stories-CSYLPYfD.js","sources":["../../packages/platform-ui/src/stories/Components/Dialog.stories.tsx"],"sourcesContent":["import type { Meta, StoryObj } from '@storybook/react';\nimport { expect, userEvent, within, waitFor } from '@storybook/test';\nimport { Dialog, Button, Paragraph, Heading } from '../../index';\nimport { useRef } from 'react';\n\nconst meta: Meta = {\n  title: 'Components/Dialog',\n  parameters: {\n    docs: {\n      description: {\n        component: `\nDialog (Modal) displays important interactions that require user attention. It appears as an overlay that blocks interaction with the rest of the page.\n\n## Variants\n\n- **Default** - Standard modal dialog\n- **Confirmation** - Yes/No confirmation dialog\n- **Alert** - Alert with single action\n- **Form dialog** - Dialog containing form\n- **Fullscreen** - Full screen on mobile\n- **Scrollable** - Content can scroll\n\n## When to Use\n\n- Confirmations and critical decisions\n- Important forms requiring focus\n- Alerts requiring user action\n- Focused workflows or wizards\n- Error messages requiring acknowledgment\n- Complex information display\n\n## Best Practices\n\n### Do\n- Use clear, descriptive titles\n- Provide primary and secondary actions\n- Trap focus within dialog\n- Return focus to trigger on close\n- Allow Escape key to close\n- Make background content inert\n\n### Don't\n- Don't use for non-critical information\n- Don't nest dialogs within dialogs\n- Don't disable close without reason\n- Don't use for navigation\n- Don't show too many dialogs in sequence\n- Don't make content scrollable horizontally\n\n## Usage Patterns\n\n### Basic Dialog\n\\`\\`\\`tsx\n<Dialog ref={dialogRef}>\n  <Heading level={2} data-size=\"sm\">Dialog Title</Heading>\n  <Paragraph>Dialog content goes here.</Paragraph>\n  <div style={{ display: 'flex', gap: 'var(--ds-spacing-2)', marginTop: 'var(--ds-spacing-4)' }}>\n    <Button variant=\"secondary\" onClick={() => dialogRef.current?.close()}>\n      Cancel\n    </Button>\n    <Button variant=\"primary\" onClick={() => dialogRef.current?.close()}>\n      Confirm\n    </Button>\n  </div>\n</Dialog>\n\\`\\`\\`\n\n### Confirmation Dialog\n\\`\\`\\`tsx\n<Dialog ref={dialogRef}>\n  <Heading level={2} data-size=\"sm\">Delete Item</Heading>\n  <Paragraph>Are you sure you want to delete this item? This action cannot be undone.</Paragraph>\n  <div style={{ display: 'flex', gap: 'var(--ds-spacing-2)', marginTop: 'var(--ds-spacing-4)' }}>\n    <Button variant=\"secondary\" onClick={() => dialogRef.current?.close()}>\n      Cancel\n    </Button>\n    <Button variant=\"danger\" onClick={() => dialogRef.current?.close()}>\n      Delete\n    </Button>\n  </div>\n</Dialog>\n\\`\\`\\`\n\n### Form Dialog\n\\`\\`\\`tsx\n<Dialog ref={dialogRef}>\n  <Heading level={2} data-size=\"sm\">Edit Profile</Heading>\n  <form onSubmit={handleSubmit}>\n    <Field>\n      <Label htmlFor=\"name\">Name</Label>\n      <Input id=\"name\" name=\"name\" />\n    </Field>\n    <Field>\n      <Label htmlFor=\"email\">Email</Label>\n      <Input id=\"email\" name=\"email\" type=\"email\" />\n    </Field>\n    <div style={{ display: 'flex', gap: 'var(--ds-spacing-2)', marginTop: 'var(--ds-spacing-4)' }}>\n      <Button variant=\"secondary\" type=\"button\" onClick={() => dialogRef.current?.close()}>\n        Cancel\n      </Button>\n      <Button variant=\"primary\" type=\"submit\">\n        Save\n      </Button>\n    </div>\n  </form>\n</Dialog>\n\\`\\`\\`\n\n## Anti-Patterns\n\n### Anti-pattern: Dialog Overuse\nUsing dialogs for simple notifications or non-critical information.\n\n### Anti-pattern: Nested Dialogs\nOpening dialogs from within other dialogs creates confusion.\n\n### Anti-pattern: No Escape Route\nDisabling all ways to close the dialog traps users.\n\n### Anti-pattern: Overwhelming Content\nPutting too much content in dialogs makes them hard to use.\n\n## Accessibility\n\n### Screen Readers\n- Dialog role announced when opened\n- Title and description provided\n- Focus trapped within dialog\n- Background content marked as inert\n- Close actions announced\n\n### Keyboard Navigation\n- Focus trapped inside dialog\n- Tab cycles through focusable elements\n- Escape key closes dialog\n- Focus returns to trigger on close\n- Logical tab order maintained\n\n### WCAG 2.1 AA Compliance\n- **Keyboard trap**: Focus stays within dialog\n- **Focus management**: Proper focus handling\n- **Return focus**: Focus returns to trigger\n- **Escape key**: Dialog closes on Escape\n- **Background inert**: Page content inaccessible\n\n### ARIA Implementation\n\\`\\`\\`tsx\n<div\n  role=\"dialog\"\n  aria-modal=\"true\"\n  aria-labelledby=\"dialog-title\"\n  aria-describedby=\"dialog-description\"\n>\n  <h2 id=\"dialog-title\">Dialog Title</h2>\n  <p id=\"dialog-description\">Dialog description</p>\n  <button aria-label=\"Close dialog\">Ã—</button>\n</div>\n\\`\\`\\`\n\n### Focus Management\n\\`\\`\\`tsx\nconst dialogRef = useRef<HTMLDialogElement>(null);\nconst triggerRef = useRef<HTMLButtonElement>(null);\n\nconst openDialog = () => {\n  dialogRef.current?.showModal();\n  // Focus automatically moves to first focusable element\n};\n\nconst closeDialog = () => {\n  dialogRef.current?.close();\n  triggerRef.current?.focus(); // Return focus\n};\n\\`\\`\\`\n\n### Best Practice for Titles\nAlways provide descriptive titles:\n\\`\\`\\`tsx\n<Dialog ref={dialogRef}>\n  <Heading level={2} data-size=\"sm\">Delete Confirmation</Heading>\n  <Paragraph>Are you sure you want to delete this item?</Paragraph>\n</Dialog>\n\\`\\`\\`\n        `,\n      },\n    },\n  },\n  tags: ['autodocs'],\n};\n\nexport default meta;\ntype Story = StoryObj;\n\n/**\n * Default dialog with open/close interaction test.\n *\n * This story tests:\n * - Dialog opens when trigger button is clicked\n * - Dialog contains expected content\n * - Dialog closes when Cancel or Confirm is clicked\n */\nexport const Default: Story = {\n  render: function Render() {\n    const dialogRef = useRef<HTMLDialogElement>(null);\n    return (\n      <>\n        <Button onClick={() => dialogRef.current?.showModal()} type=\"button\">\n          Open Dialog\n        </Button>\n        <Dialog ref={dialogRef}>\n          <Heading level={2} data-size=\"sm\">\n            Dialog Title\n          </Heading>\n          <Paragraph>This is the dialog content. You can put any content here.</Paragraph>\n          <div\n            style={{\n              display: 'flex',\n              gap: 'var(--ds-spacing-2)',\n              marginTop: 'var(--ds-spacing-4)',\n            }}\n          >\n            <Button variant=\"secondary\" onClick={() => dialogRef.current?.close()} type=\"button\">\n              Cancel\n            </Button>\n            <Button variant=\"primary\" onClick={() => dialogRef.current?.close()} type=\"button\">\n              Confirm\n            </Button>\n          </div>\n        </Dialog>\n      </>\n    );\n  },\n  play: async ({ canvasElement }) => {\n    const canvas = within(canvasElement);\n\n    // Click button to open dialog\n    const openButton = canvas.getByRole('button', { name: 'Open Dialog' });\n    await userEvent.click(openButton);\n\n    // Wait for dialog to be visible (use document.body since dialog is portal)\n    const body = within(document.body);\n    await waitFor(() => {\n      expect(body.getByRole('dialog')).toBeVisible();\n    });\n\n    // Verify dialog content\n    expect(body.getByRole('heading', { name: 'Dialog Title' })).toBeInTheDocument();\n\n    // Close dialog with Cancel\n    const cancelButton = body.getByRole('button', { name: 'Cancel' });\n    await userEvent.click(cancelButton);\n\n    // Dialog should be closed\n    await waitFor(() => {\n      expect(body.queryByRole('dialog')).not.toBeVisible();\n    });\n  },\n};\n\nexport const Confirmation: Story = {\n  render: function Render() {\n    const dialogRef = useRef<HTMLDialogElement>(null);\n    return (\n      <>\n        <Button data-color=\"danger\" onClick={() => dialogRef.current?.showModal()} type=\"button\">\n          Delete Item\n        </Button>\n        <Dialog ref={dialogRef}>\n          <Heading level={2} data-size=\"sm\">\n            Delete Confirmation\n          </Heading>\n          <Paragraph>\n            Are you sure you want to delete this item? This action cannot be undone.\n          </Paragraph>\n          <div\n            style={{\n              display: 'flex',\n              gap: 'var(--ds-spacing-2)',\n              marginTop: 'var(--ds-spacing-4)',\n            }}\n          >\n            <Button variant=\"secondary\" onClick={() => dialogRef.current?.close()} type=\"button\">\n              Cancel\n            </Button>\n            <Button data-color=\"danger\" onClick={() => dialogRef.current?.close()} type=\"button\">\n              Delete\n            </Button>\n          </div>\n        </Dialog>\n      </>\n    );\n  },\n};\n\nexport const Information: Story = {\n  render: function Render() {\n    const dialogRef = useRef<HTMLDialogElement>(null);\n    return (\n      <>\n        <Button variant=\"secondary\" onClick={() => dialogRef.current?.showModal()} type=\"button\">\n          Show Info\n        </Button>\n        <Dialog ref={dialogRef}>\n          <Heading level={2} data-size=\"sm\">\n            Information\n          </Heading>\n          <Paragraph>\n            Your resourceRequest has been successfully created. You will receive a confirmation\n            email shortly.\n          </Paragraph>\n          <div\n            style={{\n              display: 'flex',\n              justifyContent: 'flex-end',\n              marginTop: 'var(--ds-spacing-4)',\n            }}\n          >\n            <Button variant=\"primary\" onClick={() => dialogRef.current?.close()} type=\"button\">\n              OK\n            </Button>\n          </div>\n        </Dialog>\n      </>\n    );\n  },\n};\n"],"names":["meta","title","parameters","docs","description","component","tags","Default","render","dialogRef","useRef","jsxs","Fragment","jsx","Button","current","showModal","Dialog","Heading","Paragraph","display","gap","marginTop","close","play","canvasElement","openButton","within","getByRole","name","userEvent","click","body","document","waitFor","expect","toBeVisible","toBeInTheDocument","cancelButton","queryByRole","not","Confirmation","Information","justifyContent","source","originalSource","story"],"mappings":"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"}