{"version":3,"file":"ErrorSummary.stories-D-RiU-xI.js","sources":["../../packages/platform-ui/src/stories/Components/ErrorSummary.stories.tsx"],"sourcesContent":["import type { Meta, StoryObj } from '@storybook/react';\nimport { useT } from '@xala-technologies/i18n';\nimport { ErrorSummary } from '../../index';\n\nconst meta: Meta = {\n  title: 'Components/ErrorSummary',\n  parameters: {\n    docs: {\n      description: {\n        component: `\nErrorSummary displays a summary of form validation errors, helping users identify and fix multiple issues quickly.\n\n## Variants\n\n- **Default** - Standard error summary with heading and list\n- **Single error** - Single error message\n- **Multiple errors** - List of multiple validation errors\n- **With field links** - Links directly to error fields\n- **Inline** - Inline error display\n\n## When to Use\n\n- Form validation errors at the top of a form\n- After form submission with errors\n- To guide users to fix multiple errors\n- Complex forms with validation requirements\n- Multi-step forms with error collection\n- Search results with no matches\n\n## Best Practices\n\n### Do\n- Place at top of form after submission\n- Use clear, actionable error messages\n- Link directly to fields with errors\n- Receive focus when displayed\n- Use role=\"alert\" for screen readers\n- Group related errors together\n\n### Don't\n- Don't show before form submission\n- Don't use technical jargon\n- Don't hide error summary from users\n- Don't use for single field errors (use inline)\n- Don't overwhelm with too many errors\n- Don't forget to update when errors are fixed\n\n## Usage Patterns\n\n### Basic Error Summary\n\\`\\`\\`tsx\n<ErrorSummary>\n  <ErrorSummary.Heading>Please fix the following errors:</ErrorSummary.Heading>\n  <ErrorSummary.List>\n    <ErrorSummary.Item>\n      <ErrorSummary.Link href=\"#name\">Name is required</ErrorSummary.Link>\n    </ErrorSummary.Item>\n    <ErrorSummary.Item>\n      <ErrorSummary.Link href=\"#email\">Enter a valid email address</ErrorSummary.Link>\n    </ErrorSummary.Item>\n  </ErrorSummary.List>\n</ErrorSummary>\n\\`\\`\\`\n\n### Single Error\n\\`\\`\\`tsx\n<ErrorSummary>\n  <ErrorSummary.Heading>Please fix the following error:</ErrorSummary.Heading>\n  <ErrorSummary.List>\n    <ErrorSummary.Item>\n      <ErrorSummary.Link href=\"#date\">Select a valid date</ErrorSummary.Link>\n    </ErrorSummary.Item>\n  </ErrorSummary.List>\n</ErrorSummary>\n\\`\\`\\`\n\n### Multiple Errors\n\\`\\`\\`tsx\n<ErrorSummary>\n  <ErrorSummary.Heading>There are 4 errors in your form</ErrorSummary.Heading>\n  <ErrorSummary.List>\n    <ErrorSummary.Item>\n      <ErrorSummary.Link href=\"#firstName\">First name is required</ErrorSummary.Link>\n    </ErrorSummary.Item>\n    <ErrorSummary.Item>\n      <ErrorSummary.Link href=\"#lastName\">Last name is required</ErrorSummary.Link>\n    </ErrorSummary.Item>\n    <ErrorSummary.Item>\n      <ErrorSummary.Link href=\"#phone\">Phone number must be 8 digits</ErrorSummary.Link>\n    </ErrorSummary.Item>\n    <ErrorSummary.Item>\n      <ErrorSummary.Link href=\"#terms\">You must accept the terms</ErrorSummary.Link>\n    </ErrorSummary.Item>\n  </ErrorSummary.List>\n</ErrorSummary>\n\\`\\`\\`\n\n### With Error Count\n\\`\\`\\`tsx\nconst errors = [\n  { id: '1', fieldId: 'firstName', message: 'First name is required' },\n  { id: '2', fieldId: 'lastName', message: 'Last name is required' }\n];\nconst errorCount = errors.length;\n\n<ErrorSummary>\n  <ErrorSummary.Heading>\n    {errorCount === 1\n      ? 'There is 1 error in your form'\n      : \\`There are \\${errorCount} errors in your form\\`\n    }\n  </ErrorSummary.Heading>\n  <ErrorSummary.List>\n    {errors.map(error => (\n      <ErrorSummary.Item key={error.id}>\n        <ErrorSummary.Link href={\\`#\\${error.fieldId}\\`}>\n          {error.message}\n        </ErrorSummary.Link>\n      </ErrorSummary.Item>\n    ))}\n  </ErrorSummary.List>\n</ErrorSummary>\n\\`\\`\\`\n\n## Anti-Patterns\n\n### Anti-pattern: Pre-submission Errors\nShowing error summary before user submits the form.\n\n### Anti-pattern: Vague Error Messages\nUsing generic text like \"Invalid input\" without context.\n\n### Anti-pattern: No Field Links\nNot providing links to the specific fields with errors.\n\n### Anti-pattern: Persistent Errors\nNot updating error summary when errors are fixed.\n\n## Accessibility\n\n### Screen Readers\n- Role=\"alert\" announces errors immediately\n- Error count and messages announced\n- Links provide navigation to error fields\n- Focus management for error correction\n- State changes communicated\n\n### Keyboard Navigation\n- Tab navigates through error links\n- Enter activates error field links\n- Focus moves to linked field\n- Logical tab order maintained\n- All errors accessible via keyboard\n\n### WCAG 2.1 AA Compliance\n- **Error identification**: Errors clearly identified\n- **Error correction**: Suggestions for fixing errors\n- **Error prevention**: Confirmation for important actions\n- **Keyboard accessible**: All errors reachable via keyboard\n- **Focus management**: Focus moves to error fields\n\n### ARIA Implementation\n\\`\\`\\`tsx\n<div role=\"alert\" aria-labelledby=\"error-summary-heading\">\n  <h2 id=\"error-summary-heading\">There are 2 errors</h2>\n  <ul>\n    <li>\n      <a href=\"#field1\" aria-describedby=\"field1-error\">\n        Name is required\n      </a>\n    </li>\n    <li>\n      <a href=\"#field2\" aria-describedby=\"field2-error\">\n        Email is invalid\n      </a>\n    </li>\n  </ul>\n</div>\n\\`\\`\\`\n\n### Best Practice for Error Messages\nUse clear, actionable messages:\n\\`\\`\\`tsx\n// Good\n<ErrorSummary.Link href=\"#email\">Enter a valid email address (e.g., name@example.com)</ErrorSummary.Link>\n\n// Bad\n<ErrorSummary.Link href=\"#email\">Invalid input</ErrorSummary.Link>\n\\`\\`\\`\n\n### Focus Management\n\\`\\`\\`tsx\nconst errorSummaryRef = useRef<HTMLDivElement>(null);\n\n// After form validation with errors\nif (hasErrors) {\n  errorSummaryRef.current?.focus();\n}\n\\`\\`\\`\n\n### Link Implementation\nLinks should focus and scroll to error fields:\n\\`\\`\\`tsx\n<ErrorSummary.Link\n  href=\"#email-field\"\n  onClick={(e) => {\n    e.preventDefault();\n    const field = document.getElementById('email-field');\n    field?.focus();\n    field?.scrollIntoView({ behavior: 'smooth', block: 'center' });\n  }}\n>\n  Email is required\n</ErrorSummary.Link>\n\\`\\`\\`\n        `,\n      },\n    },\n  },\n  tags: ['autodocs'],\n};\n\nexport default meta;\ntype Story = StoryObj;\n\nexport const Default: Story = {\n  render: function Render() {\n    const t = useT();\n    return (\n      <ErrorSummary>\n        <ErrorSummary.Heading>{t('storybook.demo.pleaseFixErrors')}</ErrorSummary.Heading>\n        <ErrorSummary.List>\n          <ErrorSummary.Item>\n            <ErrorSummary.Link href=\"#name\">\n              {t('platform.validation.required', { field: t('storybook.demo.name') })}\n            </ErrorSummary.Link>\n          </ErrorSummary.Item>\n          <ErrorSummary.Item>\n            <ErrorSummary.Link href=\"#email\">{t('platform.validation.email')}</ErrorSummary.Link>\n          </ErrorSummary.Item>\n        </ErrorSummary.List>\n      </ErrorSummary>\n    );\n  },\n};\n\nexport const MultipleErrors: Story = {\n  render: function Render() {\n    const t = useT();\n    return (\n      <ErrorSummary>\n        <ErrorSummary.Heading>\n          {t('storybook.demo.thereAreNErrorsInForm', { count: 4 })}\n        </ErrorSummary.Heading>\n        <ErrorSummary.List>\n          <ErrorSummary.Item>\n            <ErrorSummary.Link href=\"#firstName\">\n              {t('platform.validation.required', { field: t('storybook.demo.firstName') })}\n            </ErrorSummary.Link>\n          </ErrorSummary.Item>\n          <ErrorSummary.Item>\n            <ErrorSummary.Link href=\"#lastName\">\n              {t('platform.validation.required', { field: t('storybook.demo.lastName') })}\n            </ErrorSummary.Link>\n          </ErrorSummary.Item>\n          <ErrorSummary.Item>\n            <ErrorSummary.Link href=\"#phone\">\n              {t('storybook.demo.phoneMustBe8Digits')}\n            </ErrorSummary.Link>\n          </ErrorSummary.Item>\n          <ErrorSummary.Item>\n            <ErrorSummary.Link href=\"#terms\">\n              {t('storybook.demo.mustAcceptTerms')}\n            </ErrorSummary.Link>\n          </ErrorSummary.Item>\n        </ErrorSummary.List>\n      </ErrorSummary>\n    );\n  },\n};\n\nexport const SingleError: Story = {\n  render: function Render() {\n    const t = useT();\n    return (\n      <ErrorSummary>\n        <ErrorSummary.Heading>{t('storybook.demo.pleaseFixFollowingError')}</ErrorSummary.Heading>\n        <ErrorSummary.List>\n          <ErrorSummary.Item>\n            <ErrorSummary.Link href=\"#date\">\n              {t('storybook.demo.selectValidDate')}\n            </ErrorSummary.Link>\n          </ErrorSummary.Item>\n        </ErrorSummary.List>\n      </ErrorSummary>\n    );\n  },\n};\n\nexport const Sizes: Story = {\n  render: function Render() {\n    const t = useT();\n    return (\n      <div style={{ display: 'flex', flexDirection: 'column', gap: 'var(--ds-spacing-6)' }}>\n        <ErrorSummary data-size=\"sm\">\n          <ErrorSummary.Heading>{t('storybook.story.smallSize')}</ErrorSummary.Heading>\n          <ErrorSummary.List>\n            <ErrorSummary.Item>\n              <ErrorSummary.Link href=\"#field1\">\n                {t('storybook.demo.errorMessage')}\n              </ErrorSummary.Link>\n            </ErrorSummary.Item>\n          </ErrorSummary.List>\n        </ErrorSummary>\n        <ErrorSummary data-size=\"md\">\n          <ErrorSummary.Heading>{t('storybook.story.mediumSizeDefault')}</ErrorSummary.Heading>\n          <ErrorSummary.List>\n            <ErrorSummary.Item>\n              <ErrorSummary.Link href=\"#field2\">\n                {t('storybook.demo.errorMessage')}\n              </ErrorSummary.Link>\n            </ErrorSummary.Item>\n          </ErrorSummary.List>\n        </ErrorSummary>\n        <ErrorSummary data-size=\"lg\">\n          <ErrorSummary.Heading>{t('storybook.story.largeSize')}</ErrorSummary.Heading>\n          <ErrorSummary.List>\n            <ErrorSummary.Item>\n              <ErrorSummary.Link href=\"#field3\">\n                {t('storybook.demo.errorMessage')}\n              </ErrorSummary.Link>\n            </ErrorSummary.Item>\n          </ErrorSummary.List>\n        </ErrorSummary>\n      </div>\n    );\n  },\n};\n"],"names":["meta","title","parameters","docs","description","component","tags","Default","render","t","useT","ErrorSummary","jsx","jsxs","field","MultipleErrors","count","SingleError","Sizes","display","flexDirection","gap","source","originalSource"],"mappings":"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"}