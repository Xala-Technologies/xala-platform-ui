{"version":3,"file":"roving-focus-item-DcdCcS0a.js","sources":["../../node_modules/.pnpm/@digdir+designsystemet-react@1.11.0_@types+react@18.3.27_react-dom@18.3.1_react@18.3.1/node_modules/@digdir/designsystemet-react/dist/esm/utilities/roving-focus/roving-focus-root.js","../../node_modules/.pnpm/@digdir+designsystemet-react@1.11.0_@types+react@18.3.27_react-dom@18.3.1_react@18.3.1/node_modules/@digdir/designsystemet-react/dist/esm/utilities/roving-focus/use-roving-focus.js","../../node_modules/.pnpm/@digdir+designsystemet-react@1.11.0_@types+react@18.3.27_react-dom@18.3.1_react@18.3.1/node_modules/@digdir/designsystemet-react/dist/esm/utilities/roving-focus/roving-focus-item.js"],"sourcesContent":["'use client';\nimport { jsx } from 'react/jsx-runtime';\nimport { Slot } from '@radix-ui/react-slot';\nimport { createContext, forwardRef, useState, useRef, useEffect } from 'react';\nimport { useMergeRefs } from '../hooks/use-merge-refs/use-merge-refs.js';\n\nconst RovingFocusContext = createContext({\n    elements: { current: new Map() },\n    getOrderedItems: () => [],\n    setFocusableValue: () => {\n        /* intentionally empty */\n    },\n    onShiftTab: () => {\n        /* intentionally empty */\n    },\n    focusableValue: null,\n    orientation: 'horizontal',\n});\nconst RovingFocusRoot = forwardRef(({ activeValue, asChild, orientation = 'horizontal', onBlur, onFocus, ...rest }, ref) => {\n    const Component = asChild ? Slot : 'div';\n    const activeValueOrNull = activeValue ?? null;\n    const [focusableValue, setFocusableValue] = useState(activeValueOrNull);\n    const [isShiftTabbing, setIsShiftTabbing] = useState(false);\n    const elements = useRef(new Map());\n    const myRef = useRef(null);\n    const refs = useMergeRefs([ref, myRef]);\n    const getOrderedItems = () => {\n        if (!myRef.current)\n            return [];\n        const elementsFromDOM = Array.from(myRef.current.querySelectorAll('[data-roving-tabindex-item]'));\n        return Array.from(elements.current)\n            .sort((a, b) => elementsFromDOM.indexOf(a[1]) - elementsFromDOM.indexOf(b[1]))\n            .map(([value, element]) => ({ value, element }));\n    };\n    useEffect(() => {\n        setFocusableValue(activeValueOrNull);\n    }, [activeValueOrNull]);\n    return (jsx(RovingFocusContext.Provider, { value: {\n            elements,\n            getOrderedItems,\n            focusableValue,\n            setFocusableValue,\n            onShiftTab: () => {\n                setIsShiftTabbing(true);\n            },\n            orientation,\n        }, children: jsx(Component, { ...rest, tabIndex: isShiftTabbing ? -1 : 0, onBlur: (e) => {\n                onBlur?.(e);\n                setIsShiftTabbing(false);\n                setFocusableValue(activeValue ?? null);\n            }, onFocus: (e) => {\n                onFocus?.(e);\n                if (e.target !== e.currentTarget)\n                    return;\n                const orderedItems = getOrderedItems();\n                if (orderedItems.length === 0)\n                    return;\n                if (focusableValue != null) {\n                    elements.current.get(focusableValue)?.focus();\n                }\n                else if (activeValue != null) {\n                    elements.current.get(activeValue)?.focus();\n                }\n                else {\n                    orderedItems.at(0)?.element.focus();\n                }\n            }, ref: refs }) }));\n});\n\nexport { RovingFocusContext, RovingFocusRoot };\n","'use client';\nimport { useContext } from 'react';\nimport { RovingFocusContext } from './roving-focus-root.js';\n\n// Logic from: https://www.joshuawootonn.com/react-roving-tabindex\n// Inspired by: https://github.com/radix-ui/primitives/tree/main/packages/react/roving-focus/src\n/** Handles props for `RovingFocus` in context with `RovingFocusRoot` */\nconst useRovingFocus = (value) => {\n    const { elements, getOrderedItems, setFocusableValue, focusableValue, onShiftTab, orientation, } = useContext(RovingFocusContext);\n    return {\n        getOrderedItems,\n        isFocusable: focusableValue === value,\n        orientation,\n        getRovingProps: (props) => ({\n            ...props,\n            ref: (element) => {\n                if (element) {\n                    elements.current.set(value, element);\n                }\n                else {\n                    elements.current.delete(value);\n                }\n            },\n            onKeyDown: (e) => {\n                props?.onKeyDown?.(e);\n                if (e.shiftKey && e.key === 'Tab') {\n                    onShiftTab();\n                    return;\n                }\n            },\n            onFocus: (e) => {\n                props?.onFocus?.(e);\n                setFocusableValue(value);\n            },\n            'data-roving-tabindex-item': true,\n            tabIndex: focusableValue === value ? 0 : -1,\n        }),\n    };\n};\n\nexport { useRovingFocus };\n","'use client';\nimport { jsx } from 'react/jsx-runtime';\nimport { Slot } from '@radix-ui/react-slot';\nimport { forwardRef } from 'react';\nimport { useMergeRefs } from '../hooks/use-merge-refs/use-merge-refs.js';\nimport { useRovingFocus } from './use-roving-focus.js';\n\n/** Get the next focusable RovingFocusItem */\nfunction getNextFocusableValue(items, value) {\n    const currIndex = items.findIndex((item) => item.value === value);\n    return items.at(currIndex === items.length - 1 ? 0 : currIndex + 1);\n}\n/** Get the previous focusable RovingFocusItem */\nfunction getPrevFocusableValue(items, value) {\n    const currIndex = items.findIndex((item) => item.value === value);\n    return items.at(currIndex === 0 ? -1 : currIndex - 1);\n}\nconst RovingFocusItem = forwardRef(({ value, asChild, ...rest }, ref) => {\n    const Component = asChild ? Slot : 'div';\n    const focusValue = value ?? (typeof rest.children === 'string' ? rest.children : '');\n    const { getOrderedItems, getRovingProps, orientation } = useRovingFocus(focusValue);\n    const rovingProps = getRovingProps({\n        onKeyDown: (e) => {\n            rest?.onKeyDown?.(e);\n            const items = getOrderedItems();\n            let nextItem;\n            switch (orientation) {\n                case 'horizontal':\n                    if (e.key === 'ArrowRight') {\n                        nextItem = getNextFocusableValue(items, focusValue);\n                    }\n                    if (e.key === 'ArrowLeft') {\n                        nextItem = getPrevFocusableValue(items, focusValue);\n                    }\n                    break;\n                case 'vertical':\n                    if (e.key === 'ArrowDown') {\n                        nextItem = getNextFocusableValue(items, focusValue);\n                    }\n                    if (e.key === 'ArrowUp') {\n                        nextItem = getPrevFocusableValue(items, focusValue);\n                    }\n                    break;\n                case 'ambiguous':\n                    if (['ArrowRight', 'ArrowDown'].includes(e.key)) {\n                        nextItem = getNextFocusableValue(items, focusValue);\n                    }\n                    if (['ArrowLeft', 'ArrowUp'].includes(e.key)) {\n                        nextItem = getPrevFocusableValue(items, focusValue);\n                    }\n            }\n            if (e.key === 'Home') {\n                nextItem = items[0];\n            }\n            if (e.key === 'End') {\n                nextItem = items[items.length - 1];\n            }\n            if (nextItem) {\n                e.preventDefault();\n                nextItem.element.focus();\n            }\n        },\n    });\n    const mergedRefs = useMergeRefs([ref, rovingProps.ref]);\n    return (jsx(Component, { ...rest, ...rovingProps, ref: mergedRefs, children: rest.children }));\n});\n\nexport { RovingFocusItem, getNextFocusableValue, getPrevFocusableValue };\n"],"names":["RovingFocusContext","createContext","RovingFocusRoot","forwardRef","activeValue","asChild","orientation","onBlur","onFocus","rest","ref","Component","Slot","activeValueOrNull","focusableValue","setFocusableValue","useState","isShiftTabbing","setIsShiftTabbing","elements","useRef","myRef","refs","useMergeRefs","getOrderedItems","elementsFromDOM","a","b","value","element","useEffect","jsx","e","orderedItems","_a","_b","_c","useRovingFocus","onShiftTab","useContext","props","getNextFocusableValue","items","currIndex","item","getPrevFocusableValue","RovingFocusItem","focusValue","getRovingProps","rovingProps","nextItem","mergedRefs"],"mappings":"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","x_google_ignoreList":[0,1,2]}