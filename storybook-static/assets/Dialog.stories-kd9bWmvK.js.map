{"version":3,"file":"Dialog.stories-kd9bWmvK.js","sources":["../../packages/platform-ui/src/stories/Components/Dialog.stories.tsx"],"sourcesContent":["import type { Meta, StoryObj } from '@storybook/react';\nimport { expect, userEvent, within, waitFor } from '@storybook/test';\nimport { useT } from '@xala-technologies/i18n';\nimport { Dialog, Button, Paragraph, Heading } from '../../index';\nimport { useRef } from 'react';\n\nconst meta: Meta = {\n  title: 'Components/Dialog',\n  parameters: {\n    docs: {\n      description: {\n        component: `\nDialog (Modal) displays important interactions that require user attention. It appears as an overlay that blocks interaction with the rest of the page.\n\n## Variants\n\n- **Default** - Standard modal dialog\n- **Confirmation** - Yes/No confirmation dialog\n- **Alert** - Alert with single action\n- **Form dialog** - Dialog containing form\n- **Fullscreen** - Full screen on mobile\n- **Scrollable** - Content can scroll\n\n## When to Use\n\n- Confirmations and critical decisions\n- Important forms requiring focus\n- Alerts requiring user action\n- Focused workflows or wizards\n- Error messages requiring acknowledgment\n- Complex information display\n\n## Best Practices\n\n### Do\n- Use clear, descriptive titles\n- Provide primary and secondary actions\n- Trap focus within dialog\n- Return focus to trigger on close\n- Allow Escape key to close\n- Make background content inert\n\n### Don't\n- Don't use for non-critical information\n- Don't nest dialogs within dialogs\n- Don't disable close without reason\n- Don't use for navigation\n- Don't show too many dialogs in sequence\n- Don't make content scrollable horizontally\n\n## Usage Patterns\n\n### Basic Dialog\n\\`\\`\\`tsx\n<Dialog ref={dialogRef}>\n  <Heading level={2} data-size=\"sm\">Dialog Title</Heading>\n  <Paragraph>Dialog content goes here.</Paragraph>\n  <div style={{ display: 'flex', gap: 'var(--ds-spacing-2)', marginTop: 'var(--ds-spacing-4)' }}>\n    <Button variant=\"secondary\" onClick={() => dialogRef.current?.close()}>\n      Cancel\n    </Button>\n    <Button variant=\"primary\" onClick={() => dialogRef.current?.close()}>\n      Confirm\n    </Button>\n  </div>\n</Dialog>\n\\`\\`\\`\n\n### Confirmation Dialog\n\\`\\`\\`tsx\n<Dialog ref={dialogRef}>\n  <Heading level={2} data-size=\"sm\">Delete Item</Heading>\n  <Paragraph>Are you sure you want to delete this item? This action cannot be undone.</Paragraph>\n  <div style={{ display: 'flex', gap: 'var(--ds-spacing-2)', marginTop: 'var(--ds-spacing-4)' }}>\n    <Button variant=\"secondary\" onClick={() => dialogRef.current?.close()}>\n      Cancel\n    </Button>\n    <Button variant=\"danger\" onClick={() => dialogRef.current?.close()}>\n      Delete\n    </Button>\n  </div>\n</Dialog>\n\\`\\`\\`\n\n### Form Dialog\n\\`\\`\\`tsx\n<Dialog ref={dialogRef}>\n  <Heading level={2} data-size=\"sm\">Edit Profile</Heading>\n  <form onSubmit={handleSubmit}>\n    <Field>\n      <Label htmlFor=\"name\">Name</Label>\n      <Input id=\"name\" name=\"name\" />\n    </Field>\n    <Field>\n      <Label htmlFor=\"email\">Email</Label>\n      <Input id=\"email\" name=\"email\" type=\"email\" />\n    </Field>\n    <div style={{ display: 'flex', gap: 'var(--ds-spacing-2)', marginTop: 'var(--ds-spacing-4)' }}>\n      <Button variant=\"secondary\" type=\"button\" onClick={() => dialogRef.current?.close()}>\n        Cancel\n      </Button>\n      <Button variant=\"primary\" type=\"submit\">\n        Save\n      </Button>\n    </div>\n  </form>\n</Dialog>\n\\`\\`\\`\n\n## Anti-Patterns\n\n### Anti-pattern: Dialog Overuse\nUsing dialogs for simple notifications or non-critical information.\n\n### Anti-pattern: Nested Dialogs\nOpening dialogs from within other dialogs creates confusion.\n\n### Anti-pattern: No Escape Route\nDisabling all ways to close the dialog traps users.\n\n### Anti-pattern: Overwhelming Content\nPutting too much content in dialogs makes them hard to use.\n\n## Accessibility\n\n### Screen Readers\n- Dialog role announced when opened\n- Title and description provided\n- Focus trapped within dialog\n- Background content marked as inert\n- Close actions announced\n\n### Keyboard Navigation\n- Focus trapped inside dialog\n- Tab cycles through focusable elements\n- Escape key closes dialog\n- Focus returns to trigger on close\n- Logical tab order maintained\n\n### WCAG 2.1 AA Compliance\n- **Keyboard trap**: Focus stays within dialog\n- **Focus management**: Proper focus handling\n- **Return focus**: Focus returns to trigger\n- **Escape key**: Dialog closes on Escape\n- **Background inert**: Page content inaccessible\n\n### ARIA Implementation\n\\`\\`\\`tsx\n<div\n  role=\"dialog\"\n  aria-modal=\"true\"\n  aria-labelledby=\"dialog-title\"\n  aria-describedby=\"dialog-description\"\n>\n  <h2 id=\"dialog-title\">Dialog Title</h2>\n  <p id=\"dialog-description\">Dialog description</p>\n  <button aria-label=\"Close dialog\">x</button>\n</div>\n\\`\\`\\`\n\n### Focus Management\n\\`\\`\\`tsx\nconst dialogRef = useRef<HTMLDialogElement>(null);\nconst triggerRef = useRef<HTMLButtonElement>(null);\n\nconst openDialog = () => {\n  dialogRef.current?.showModal();\n  // Focus automatically moves to first focusable element\n};\n\nconst closeDialog = () => {\n  dialogRef.current?.close();\n  triggerRef.current?.focus(); // Return focus\n};\n\\`\\`\\`\n\n### Best Practice for Titles\nAlways provide descriptive titles:\n\\`\\`\\`tsx\n<Dialog ref={dialogRef}>\n  <Heading level={2} data-size=\"sm\">Delete Confirmation</Heading>\n  <Paragraph>Are you sure you want to delete this item?</Paragraph>\n</Dialog>\n\\`\\`\\`\n        `,\n      },\n    },\n  },\n  tags: ['autodocs'],\n};\n\nexport default meta;\ntype Story = StoryObj;\n\n/**\n * Default dialog with open/close interaction test.\n *\n * This story tests:\n * - Dialog opens when trigger button is clicked\n * - Dialog contains expected content\n * - Dialog closes when Cancel or Confirm is clicked\n */\nexport const Default: Story = {\n  render: function Render() {\n    const t = useT();\n    const dialogRef = useRef<HTMLDialogElement>(null);\n    return (\n      <>\n        <Button onClick={() => dialogRef.current?.showModal()} type=\"button\">\n          {t('storybook.demo.openDialog')}\n        </Button>\n        <Dialog ref={dialogRef}>\n          <Heading level={2} data-size=\"sm\">\n            {t('storybook.demo.dialogTitle')}\n          </Heading>\n          <Paragraph>{t('storybook.demo.dialogContent')}</Paragraph>\n          <div\n            style={{\n              display: 'flex',\n              gap: 'var(--ds-spacing-2)',\n              marginTop: 'var(--ds-spacing-4)',\n            }}\n          >\n            <Button variant=\"secondary\" onClick={() => dialogRef.current?.close()} type=\"button\">\n              {t('platform.common.cancel')}\n            </Button>\n            <Button variant=\"primary\" onClick={() => dialogRef.current?.close()} type=\"button\">\n              {t('storybook.demo.confirm')}\n            </Button>\n          </div>\n        </Dialog>\n      </>\n    );\n  },\n  play: async ({ canvasElement }) => {\n    const canvas = within(canvasElement);\n\n    // Click button to open dialog\n    const openButton = canvas.getByRole('button');\n    await userEvent.click(openButton);\n\n    // Wait for dialog to be visible (use document.body since dialog is portal)\n    const body = within(document.body);\n    await waitFor(() => {\n      expect(body.getByRole('dialog')).toBeVisible();\n    });\n\n    // Close dialog with Cancel\n    const cancelButton = body.getByRole('button', { name: /cancel/i });\n    await userEvent.click(cancelButton);\n\n    // Dialog should be closed\n    await waitFor(() => {\n      expect(body.queryByRole('dialog')).not.toBeVisible();\n    });\n  },\n};\n\nexport const Confirmation: Story = {\n  render: function Render() {\n    const t = useT();\n    const dialogRef = useRef<HTMLDialogElement>(null);\n    return (\n      <>\n        <Button data-color=\"danger\" onClick={() => dialogRef.current?.showModal()} type=\"button\">\n          {t('storybook.demo.deleteItem')}\n        </Button>\n        <Dialog ref={dialogRef}>\n          <Heading level={2} data-size=\"sm\">\n            {t('storybook.demo.deleteConfirmation')}\n          </Heading>\n          <Paragraph>{t('storybook.demo.deleteConfirmationMessage')}</Paragraph>\n          <div\n            style={{\n              display: 'flex',\n              gap: 'var(--ds-spacing-2)',\n              marginTop: 'var(--ds-spacing-4)',\n            }}\n          >\n            <Button variant=\"secondary\" onClick={() => dialogRef.current?.close()} type=\"button\">\n              {t('platform.common.cancel')}\n            </Button>\n            <Button data-color=\"danger\" onClick={() => dialogRef.current?.close()} type=\"button\">\n              {t('platform.common.delete')}\n            </Button>\n          </div>\n        </Dialog>\n      </>\n    );\n  },\n};\n\nexport const Information: Story = {\n  render: function Render() {\n    const t = useT();\n    const dialogRef = useRef<HTMLDialogElement>(null);\n    return (\n      <>\n        <Button variant=\"secondary\" onClick={() => dialogRef.current?.showModal()} type=\"button\">\n          {t('storybook.demo.showInfo')}\n        </Button>\n        <Dialog ref={dialogRef}>\n          <Heading level={2} data-size=\"sm\">\n            {t('storybook.demo.information')}\n          </Heading>\n          <Paragraph>{t('storybook.demo.bookingCreatedSuccessfully')}</Paragraph>\n          <div\n            style={{\n              display: 'flex',\n              justifyContent: 'flex-end',\n              marginTop: 'var(--ds-spacing-4)',\n            }}\n          >\n            <Button variant=\"primary\" onClick={() => dialogRef.current?.close()} type=\"button\">\n              OK\n            </Button>\n          </div>\n        </Dialog>\n      </>\n    );\n  },\n};\n"],"names":["meta","title","parameters","docs","description","component","tags","Default","render","t","useT","dialogRef","useRef","jsxs","Fragment","jsx","Button","current","showModal","Dialog","Heading","Paragraph","display","gap","marginTop","close","play","canvasElement","openButton","within","getByRole","userEvent","click","body","document","waitFor","expect","toBeVisible","cancelButton","name","queryByRole","not","Confirmation","Information","justifyContent","source","originalSource","story"],"mappings":"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"}